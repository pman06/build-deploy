steps:
  - download: current
    artifact: drop

  - script: pwd && ls -Rla
    workingDirectory: $(Pipeline.Workspace)

  - task: AzureRmWebAppDeployment@4
    inputs:
      ConnectionType: "AzureRM"
      azureSubscription: "Azure subscription 1(3adc070f-9710-4754-8588-55bbc2ae1644)"
      appType: "webAppLinux"
      WebAppName: "test-webapp-functions"
      packageForLinux: "$(Pipeline.Workspace)/drop/rsp-$(Build.BuildId).zip"
      RuntimeStack: "NODE|16-lts"
      startUpCommand: "npm install -g serve && serve -s build"
  # - task: AzureWebApp@1
  #   inputs:
  #     azureSubscription: "Azure subscription 1(3adc070f-9710-4754-8588-55bbc2ae1644)"
  #     appType: "webAppLinux"
  #     appName: "test-mywebapp-react"
  #     package: "$(Pipeline.Workspace)/drop/*.zip"
  #     runtimeStack: "NODE|16-lts"
  #     startUpCommand: "pm2 serve /home/site/wwwroot/build --no-daemon --spa"
