steps:
  - task: Cache@2
    inputs:
      key: '"python" | "$(Agent.OS)" | "(scriptPath)"'
      path: "$(scriptPath)"
      cacheHitVar: "scriptcachehit"
    displayName: "cache script"
  - download: current
    artifact: drop
  - task: AzureWebApp@1
    inputs:
      azureSubscription: "Azure subscription 1(3adc070f-9710-4754-8588-55bbc2ae1644)"
      appType: "webAppLinux"
      appName: "test-mywebapp-react-uat"
      package: "$(Pipeline.Workspace)/drop/*.zip"
      runtimeStack: "NODE|16-lts"

  - task: PythonScript@0
    condition: succeeded()
    inputs:
      scriptSource: "filePath"
      scriptPath: "azure-pipeline/scripts/updateWI.py"
    env:
      SYSTEM_ACCESSTOKEN: $(System.AccessToken)
